{
  "pluginAlias": "MultiSwitcheroo",
  "pluginType": "accessory",
  "schema": {
    "type": "object",
    "properties": {
      "accessories": {
        "type": "array",
        "title": "Accessories",
        "items": {
          "oneOf": [
            {
              "$ref": "#/definitions/switcheroo"
            },
            {
              "$ref": "#/definitions/multiSwitcheroo"
            }
          ]
        }
      }
    },
    "definitions": {
      "switchConfig": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "onUrl": {
            "type": "string",
            "title": "On URL"
          },
          "offUrl": {
            "type": "string",
            "title": "Off URL"
          },
          "statusPattern": {
            "type": "string",
            "title": "Status Pattern"
          }
        },
        "required": ["name", "onUrl", "offUrl", "statusPattern"]
      },
      "switcheroo": {
        "type": "object",
        "properties": {
          "accessory": {
            "type": "string",
            "enum": ["Switcheroo"],
            "default": "Switcheroo"
          },
          "name": {
            "type": "string",
            "title": "Switch Name"
          },
          "onUrl": {
            "type": "string",
            "title": "On URL"
          },
          "offUrl": {
            "type": "string",
            "title": "Off URL"
          },
          "statusUrl": {
            "type": "string",
            "title": "Status URL"
          },
          "statusPattern": {
            "type": "string",
            "title": "Status Pattern"
          },
          "pollingInterval": {
            "type": "integer",
            "title": "Polling Interval (Milliseconds)",
            "default": 3000
          },
          "manufacturer": {
            "type": "string",
            "title": "Manufacturer"
          },
          "model": {
            "type": "string",
            "title": "Model"
          },
          "serialNumber": {
            "type": "string",
            "title": "Serial Number"
          }
        },
        "required": ["accessory", "name", "onUrl", "offUrl", "statusUrl", "statusPattern"]
      },
      "multiSwitcheroo": {
        "type": "object",
        "properties": {
          "accessory": {
            "type": "string",
            "enum": ["MultiSwitcheroo"],
            "default": "MultiSwitcheroo"
          },
          "name": {
            "type": "string",
            "title": "Main Switch Name"
          },
          "statusUrl": {
            "type": "string",
            "title": "Status URL"
          },
          "pollingInterval": {
            "type": "integer",
            "title": "Polling Interval (Milliseconds)",
            "default": 3000
          },
          "manufacturer": {
            "type": "string",
            "title": "Manufacturer"
          },
          "model": {
            "type": "string",
            "title": "Model"
          },
          "serialNumber": {
            "type": "string",
            "title": "Serial Number"
          },
          "switches": {
            "type": "array",
            "title": "Included Switches",
            "items": {
              "$ref": "#/definitions/switchConfig"
            }
          }
        },
        "required": ["accessory", "name", "statusUrl", "pollingInterval", "switches"]
      }
    }
  }
}
